<!doctype html>
<html class="h-full" lang="en">
<head>
  <!-- ─── Core meta ─────────────────────────────────────────── -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">

  {# ---------- Title & description (one block each) ---------- #}
  <title>{% block title %}EliteDatingSearch{% endblock %}</title>

  {% set default_description = (
      "EliteDatingSearch offers confidential, executive-level matchmaking "
      "for commitment-minded singles."
  ) %}

  <meta name="description"
        content="{% block description %}{{ default_description }}{% endblock %}">

  {# ---------- Open-Graph tags -------------------------------- #}
  <meta property="og:type"        content="website">
  <meta property="og:title"
        content="{% block og_title %}{{ self.title()|striptags }}{% endblock %}">
  <meta property="og:description"
        content="{% block og_desc %}{{ self.description()|striptags }}{% endblock %}">
  <meta property="og:image"
        content="{{ url_for('main.static', filename='img/og-default.jpg') }}">
  <meta property="og:url"         content="{{ request.url }}">

  {# ---------- Favicons --------------------------------------- #}
  <link rel="icon" type="image/png" sizes="32x32"
        href="{{ url_for('main.static', filename='img/favicon-32x32.png') }}">

  {# ---------- CSS -------------------------------------------- #}
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet"
        href="{{ url_for('main.static', filename='css/site.css') }}">
	<link rel="stylesheet"
      href="{{ url_for('chat.static', filename='css/chat_global.css') }}">
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@glidejs/glide@3.6.0/dist/css/glide.core.min.css">
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@glidejs/glide@3.6.0/dist/css/glide.theme.min.css">

  {# ---------- Extra head assets ------------------------------ #}
  {% block extra_head %}{% endblock %}
</head>

<body class="h-full flex flex-col flex1 min-h-0 text-neutral-900 bg-white">
{% block navbar %}
  {% include "partials/navbar.html" %}
{% endblock %}

  {% block hero %}{% endblock %}

  <main id="main-content" class="flex-grow">
    {% block content %}{% endblock %}
  </main>

  {# ----- live-chat widget (hide on /rep by overriding block) -- #}
  {% block live_chat %}
  	{% if current_user.is_authenticated %}
    	{% include "partials/live_chat.html" %}
    {% else %}
    	<a  href="{{ url_for('auth.login', next=request.full_path) }}"
        style="
          position: fixed;
          right: 1rem; bottom: 1rem;
          background: #2563eb;        /* Tailwind 'blue-600' */
          color: white;
          padding: .5rem 1rem;
          border-radius: .5rem;
          font-size: .875rem;
          box-shadow: 0 2px 6px rgba(0,0,0,.2);
          text-decoration: none;
        ">
      Log&nbsp;in&nbsp;to&nbsp;chat
    </a>
   {% endif %}
  {% endblock %}
{% block footer %}
  {% include "partials/footer.html" %}
{% endblock %}

  <!-- Alpine (optional) + global JS -->
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <script src="{{ url_for('main.static', filename='js/main.js') }}"></script>

  <!-- Socket.IO + visitor widget -->
  <script defer src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
  <script defer type="module"
  			src="{{ url_for('static', filename='js/chat_common.js') }}"></script>
  <script defer type="module"
  					src="{{ url_for('chat.static', filename='js/live_chat.js') }}"></script>

  {# ---------- Extra JS --------------------------------------- #}
  {% block extra_js %}
    <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const path = document.querySelector('#hero-signature path');
        if (!path) return;
        const length = path.getTotalLength();
        path.style.strokeDasharray = length;
        path.style.strokeDashoffset = length;

        anime({
          targets: path,
          strokeDashoffset: [length, 0],
          duration: 2600,
          easing: 'easeOutQuad',
          delay: 400
        });
      });
    </script>
  {% endblock %}

  {% block scripts %}{% endblock %}
  {% block extra_scripts %}{% endblock %}
</body>
</html>